---
import ToolsLayout from '../../layouts/ToolsLayout.astro';
---

<ToolsLayout title="Siteswap Validator" icon="üî¢">
  <section class="space-y-8 text-center">
    <p class="text-gray-700">
      Enter a juggling pattern (e.g. <code>531</code> or <code>744</code>) to check if it‚Äôs valid.
    </p>

    <input
      id="pattern"
      type="text"
      placeholder="Enter Siteswap (e.g. 531)"
      class="w-full border border-gray-300 rounded px-4 py-2 text-center"
    />
    <button id="validate" class="mt-4 px-6 py-3 bg-gray-800 text-white rounded hover:bg-yellow-400 transition">
      Validate
    </button>

    <div id="result" class="text-lg font-semibold text-gray-900 mt-6"></div>
  </section>

  <script>
    function isValidSiteswap(input: string) {
      if (!/^[0-9]+$/.test(input)) return false;
      const numbers = input.split('').map(Number);
      const throws = numbers.length;
      const landingTimes = new Set();
      for (let i = 0; i < throws; i++) {
        const landing = (i + numbers[i]) % throws;
        if (landingTimes.has(landing)) return false;
        landingTimes.add(landing);
      }
      return true;
    }

    document.getElementById('validate')!.onclick = () => {
      const pattern = (document.getElementById('pattern') as HTMLInputElement)!.value.trim();
      const result = document.getElementById('result');
      if (pattern === '') {
        result!.textContent = 'Please enter a pattern.';
        result!.className = 'text-red-500 font-semibold mt-6';
        return;
      }
      const valid = isValidSiteswap(pattern);
      result!.textContent = valid ? '‚úÖ Valid Siteswap!' : '‚ùå Invalid pattern.';
      result!.className = valid
        ? 'text-green-600 font-semibold mt-6'
        : 'text-red-500 font-semibold mt-6';
    };
  </script>
</ToolsLayout>
